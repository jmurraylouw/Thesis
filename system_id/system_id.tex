\graphicspath{{system_id/fig/}, {system_id/plots}}

\chapter{System identification}
\label{chap:system_id}

    \paragraph
    System identification is the process of creating a mathematical model of a dynamical system by using input and output measurements of that system.
    Two major approaches are used to represent the dynamics of such a system:
    \begin{enumerate}
        \item A priori mathematical modelling with parameter estimation
        \item Data-driven system identification
    \end{enumerate}

    \paragraph
    This chapter discusses these system identification approaches and describes the differences between them.
    For each approach, specific estimation techniques are explained and applied to the quadrotor and payload system.
    The results of these techniques are then compared to each other.

    \input{system_id/white_black_box.tex}
    \input{system_id/plant.tex}
    \input{system_id/param_estimation.tex}
    \input{system_id/dmdc.tex}
    \input{system_id/havok.tex}
    \input{system_id/implementation.tex}

    \section{Conclusion}

        \paragraph
        \gls{DMDc} and \gls{HAVOK} produce very similar prediction errors for a range of different simulation conditions.
        \gls{HAVOK} generally has slightly lower errors, but this may have a negligible effect on control.
        \gls{DMDc} will be used in the remainder of this work 
        because the algorithm has been studied more, is less computationally complex and provides similar performance to \gls{HAVOK}.
        These data-driven methods were shown to produce accurate predictions of the payload dynamics 
        with a practical length of training data, sample time and noise level.
        This proves to be promising for practical implementation with a \gls{MPC} on a quadrotor companion computer.
        The data-driven methods also proved to provide accurate prediction with a range of different payload parameters
        and even with payloads that act as a double pendulum.
        In contrast, the considered white-box system identification technique 
        failed to identify a relevant model for the double pendulum dynamics.
        Therefore the data-driven approach provides a more general system identification method 
        that can be used for a range of different suspended payloads without being redesigned for specific dynamics.

        % \gls{DMD} and \gls{HAVOK} work very similarly with single pend.
        % \gls{HAVOK} has slightly better prediction accuracy, but this small difference has neglible effect on control.
        % It is difficult to compare the white-box to the black-box models because the real effect will only be seen during control.
        % However it is clear that the accuracy of the white-box model degrades significantly 
        % when a payload that causes double pendulum dynamics.

        % The major advantage of the data-driven approach which was demonstrated in this section 
        % is that the method was applied to different dynamical systems   

        % \paragraph
        % For each of these payload cases, a different parameter estimation based techniques would needs to be designed for effective control.
        % This is undesirable for practical drone deliveries, especially when the type of paylaod is not known well in advance or changes regularly.
        % A data-driven technique provides a more general solution since it accommodates a larger range of payload types and does not require a prioir modelling information.
            
        % \paragraph
        % Since the a priori white-box model is based on a single pendulum model, 
        % the dynamics described by the model are significantly different from the actual dynamics.
        % This will have a detrimental effect on the control performance of a controller based on such a model,
        % since the controller will be designed for different plant than what it is controlling actually controlling.
       